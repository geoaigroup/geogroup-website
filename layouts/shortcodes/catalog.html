<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"></script>
<script src="https://unpkg.com/@turf/turf@6/turf.min.js"></script>
<script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-draw/v1.4.3/mapbox-gl-draw.js"></script>
<link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-draw/v1.4.3/mapbox-gl-draw.css"
    type="text/css">



<hr>


<div class="d-flex justify-content-between flex-wrap" id="main_cards_body">

</div>


<script src="https://unpkg.com/supercluster@8.0.0/dist/supercluster.min.js"></script>



<style>
    .overmap {
        position: absolute;
        top: 10px;
        left: 10px;
        padding: 10px;
        border-radius: 5px;
        z-index: 1;
        width: 200px;

    }
    .map-description {
        position: absolute;
        bottom: 40px;
        right: 5px;
        z-index: 2;
    }
</style>
<script>
const _0x271d0d=_0x3ded;(function(_0x2f5bdf,_0x193e9a){const _0x44c6c0=_0x3ded,_0x3f3319=_0x2f5bdf();while(!![]){try{const _0x3d090e=parseInt(_0x44c6c0(0x194))/0x1+-parseInt(_0x44c6c0(0xe9))/0x2+-parseInt(_0x44c6c0(0x169))/0x3*(-parseInt(_0x44c6c0(0xe4))/0x4)+-parseInt(_0x44c6c0(0xed))/0x5+-parseInt(_0x44c6c0(0x18e))/0x6*(parseInt(_0x44c6c0(0xe6))/0x7)+-parseInt(_0x44c6c0(0x12a))/0x8+parseInt(_0x44c6c0(0x189))/0x9;if(_0x3d090e===_0x193e9a)break;else _0x3f3319['push'](_0x3f3319['shift']());}catch(_0x4fc2f2){_0x3f3319['push'](_0x3f3319['shift']());}}}(_0xf5e1,0x53ef9));function _0x3ded(_0x4cf1d7,_0x22fa6a){const _0xf5e1b8=_0xf5e1();return _0x3ded=function(_0x3deddd,_0x2771bd){_0x3deddd=_0x3deddd-0xc4;let _0x490174=_0xf5e1b8[_0x3deddd];return _0x490174;},_0x3ded(_0x4cf1d7,_0x22fa6a);}function formatNumber(_0x29815e){const _0x4c20e1=_0x3ded;if(_0x29815e<0x3e8)return _0x29815e[_0x4c20e1(0xc9)]();else{if(_0x29815e<0xf4240)return(_0x29815e/0x3e8)[_0x4c20e1(0x15b)](0x2)+'k';else{if(_0x29815e<0x3b9aca00)return(_0x29815e/0xf4240)[_0x4c20e1(0x15b)](0x2)+'m';else return _0x29815e<0xe8d4a51000?(_0x29815e/0x3b9aca00)['toFixed'](0x2)+'b':(_0x29815e/0xe8d4a51000)['toFixed'](0x2)+'t';}}}function _0xf5e1(){const _0x3f0ede=['addGeoLocator','point_count','The\x20Lebanese\x20Wheat\x20Map','addTimeStep','log','&year=2017','map1','/1200x1200?access_token=','835008PORmRD','NavigationControl','Loaded\x20completely','addTimeFilter','getBounds','height','forEach','FullscreenControl','drawer','setFinal','moveend','push','DIN\x20Offc\x20Pro\x20Medium','insertAdjacentHTML','setLayoutProperty','visible','Feature','addSource','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22card\x20w-100\x22\x20style=\x22\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x27','cache_number','stringify','draw','https://geoai.cnrs.edu.lb/geoaigeoserver/wheat','&year=2020','draw.selectionchange','remove','toArray','mapDescription','https://geoai.cnrs.edu.lb/geoaigeoserver/static/deja_clustered/lebanon_11.json','getSouthWest','stepadded','Load\x20Cluster\x20Map','catch','\x20square\x20meters','min','centroids','setRTLTextPlugin','mapbox://styles/mapbox/satellite-streets-v12','lng','getNorthEast','type','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</small>','Good\x20lad\x20don\x27t\x20add\x20the\x20finals\x20before\x20at\x20least\x20one\x20step','#ffa657','cards_container_id','url_additional_parameters','&year=2023','timelabel','This\x20is\x20a\x20point','toFixed','selector','cluster-count','#ffffff','calculateZoom','PolygonArea','textContent','ShowDrawingArea','visibility','getElementById','addNavigation','printCard','Winter\x20Wheat\x20Fields\x20In\x20Lebanon','then','24WoHwAV','idle','2017','My\x20Point','innerHTML','sort','source','AddDescription','createElement','map','https://geoai.cnrs.edu.lb/geoaigeoserver/static/deja_clustered/lebanon_8.json','lat','point_count_abbreviated','innerHeight','value','description','2021','mapbox://styles/mapbox/','json','error','Select','smartCluster','clusters','getZoom','https://geoai.cnrs.edu.lb/geoaigeoserver/static/deja_clustered/lebanon_10.json','#11b4da','main_cards_body','circle','#e9bf48','https://geoai.cnrs.edu.lb/geoaigeoserver/static/deja_clustered/lebanon_9.json','Loading\x20...','button','5935707SnVinN','SmartFetchClusters','drawerdownload\x27\x20></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x27','clusterLoadButton','map2','4428mizmPH','#e51e1e','step','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<select\x20class=\x22form-select\x20\x20mb-3\x22\x20id=\x27','target','max','603437dHYKoO','Please\x20add\x20Time\x20Step\x20First','appendChild','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x20\x22text-left\x20p-2\x20bg-light\x20rounded\x20\x20my-2\x20h5\x22>Area:\x20','clientCluster','setSourceUrl','addStyleSelector','addDrawing\x20First','setMaxZoom','features','addDrawing','length','declared','addControl','&year=2021','floor','Point','Error\x20fetching\x20centroids\x20from\x20GeoServer:','loader','2018','time\x27\x20\x20></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22','steps_with_time','has','toString','clientFetcher','getSource','setCache','addScale','&year=2022','sin','Selected\x20area:\x20','querySelector','The\x20first\x20comprehensive\x20Lebanese\x20Urban\x20Map\x20was\x20completely\x20autonomously\x20generated\x20using\x20\x20Deep\x20Learning\x20Models\x20that\x20were\x20developed\x20and\x20tested\x20at\x20the\x20National\x20Council\x20for\x20Scientific\x20Research\x20(CNRS).','container','&year=2019','circle_radius','loadMap','LN2','Choose\x20Year:\x20','loading\x20Cache','addFullScreen','Good\x20lad\x20don\x27t\x20apply\x20before\x20adding\x20a\x20step\x20and\x20the\x20finals','token','Load','The\x20first\x20Lebanese\x20Wheat\x20Map\x20completely\x20autonomously\x20generated\x20using\x20Deep\x20Learning\x20Models\x20By\x20GeoAI\x20Group','geometry','fetchCentroids','&year=2016','fetchClusters','width','137908lzvZnr','2016','2814atdWgf','unclustered','2023','278354mnahWt','drawerdownload','cache_loaded','circle_color','3273730AHpbmW','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small\x20class=\x20\x22fst-italic\x20\x20p-1\x20rounded\x22\x20style=\x22background-color:\x20rgba(255,\x20255,\x20255,\x200.8);\x22>\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','btn\x20w-100\x20btn-success\x20p-2','Good\x20lad\x20don\x27t\x20add\x20a\x20step\x20after\x20setting\x20the\x20finals','slider\x22\x20class=\x22w-100\x20form-range\x22\x20type=\x22range\x22\x20min=\x220\x22\x20max=\x22','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22w-100\x20text-center\x20p-3\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-primary\x22\x20type=\x22button\x22\x20disabled>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22spinner-border\x20spinner-border-sm\x22\x20role=\x22status\x22\x20aria-hidden=\x22true\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Loading\x20data...\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','timelabel\x22\x20class=\x22w-100\x20form-label\x20h5\x20\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20id=\x22','updateClusters','FeatureCollection','getCenter','title','serverCluster','\x20The\x20Lebanese\x20Urban\x20Map','geojson','slider','setData','source_url','join','\x22\x20step=\x221\x22\x20value=\x220\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','disabled','https://geoai.cnrs.edu.lb/geoaigeoserver/static/deja_clustered/lebanon_6.json','className','LngLatBounds','#FFFFFF','map_container','finaladded','#69c0ff','cache_max_zoom','cache','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22w-100\x20bg-light\x20rounded\x20p-3\x20\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20id=\x22','?zoom=','SetUnclustered','Map','coordinates','setToken','get','innerWidth','2019','drawer\x27\x20></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x27','apply','addTo','addStep','Polygon','&bbox=','#fff','DownloadDrawingArea','accessToken','addLayer','setMinZoom','input','getNorth','https://api.mapbox.com/styles/v1/mapbox/satellite-streets-v12/static/','setBounds'];_0xf5e1=function(){return _0x3f0ede;};return _0xf5e1();}class ClusterLayers{constructor(_0x575aff,_0x14eb52){const _0xdfcbd3=_0x3ded;this[_0xdfcbd3(0x172)]=_0x575aff,this[_0xdfcbd3(0x16f)]=_0x14eb52,this[_0xdfcbd3(0xec)]=['step',['get',_0xdfcbd3(0x123)]],this[_0xdfcbd3(0xd5)]=[_0xdfcbd3(0x190),[_0xdfcbd3(0x110),'point_count']],this[_0xdfcbd3(0x148)]=![],this[_0xdfcbd3(0x106)]=![],this['unclustered']=[_0xdfcbd3(0x182),0x4,0x1,_0xdfcbd3(0x119)];}['addStep'](_0x8bd30b,_0x217185,_0x2507cf){const _0x1836eb=_0x3ded;!this[_0x1836eb(0x106)]?(this[_0x1836eb(0x148)]=!![],this[_0x1836eb(0xec)]['push'](_0x2507cf),this[_0x1836eb(0xec)][_0x1836eb(0x135)](_0x8bd30b),this[_0x1836eb(0xd5)][_0x1836eb(0x135)](_0x217185),this['circle_radius'][_0x1836eb(0x135)](_0x8bd30b),this[_0x1836eb(0x148)]=!![]):console[_0x1836eb(0x126)](_0x1836eb(0xf0));}[_0x271d0d(0x133)](_0xec15a2,_0x35e897){const _0x589a7e=_0x271d0d;this['stepadded']?(this[_0x589a7e(0xec)][_0x589a7e(0x135)](_0x35e897),this[_0x589a7e(0xd5)][_0x589a7e(0x135)](_0xec15a2),this[_0x589a7e(0x106)]=!![]):console[_0x589a7e(0x126)](_0x589a7e(0x154));}['SetUnclustered'](_0x5e42ab,_0x34811c,_0x38c006,_0x3be79a){const _0x1f73e0=_0x271d0d;this[_0x1f73e0(0xe7)]=[_0x5e42ab,_0x34811c,_0x38c006,_0x3be79a];}['apply'](){const _0x527428=_0x271d0d;this[_0x527428(0x148)]&&this[_0x527428(0x106)]?(this[_0x527428(0x172)][_0x527428(0x11c)]({'id':_0x527428(0x17f),'type':_0x527428(0x184),'source':this[_0x527428(0x16f)],'filter':[_0x527428(0xc8),_0x527428(0x123)],'paint':{'circle-color':this['circle_color'],'circle-radius':this[_0x527428(0xd5)]}}),this[_0x527428(0x172)]['addLayer']({'id':_0x527428(0x15d),'type':'symbol','source':this[_0x527428(0x16f)],'filter':[_0x527428(0xc8),'point_count'],'layout':{'text-field':['get',_0x527428(0x175)],'text-font':[_0x527428(0x136),'Arial\x20Unicode\x20MS\x20Bold'],'text-size':0xc}}),this['map'][_0x527428(0x11c)]({'id':'unclustered-point','type':_0x527428(0x184),'source':this['source'],'filter':['!',[_0x527428(0xc8),'point_count']],'paint':{'circle-color':this[_0x527428(0xe7)][0x0],'circle-radius':this['unclustered'][0x1],'circle-stroke-width':this['unclustered'][0x2],'circle-stroke-color':this[_0x527428(0xe7)][0x3]}})):console[_0x527428(0x126)](_0x527428(0xdb));}}class MapCard{static [_0x271d0d(0xdc)]='';static ['declared']=![];static['setToken'](_0x341830){MapCard['token']=_0x341830;}constructor(_0x50dffa,_0x1c3316,_0x214a5e,_0x28fcba){const _0xce0da5=_0x271d0d;!MapCard['declared']&&(MapCard[_0xce0da5(0x1a0)]=!![],mapboxgl[_0xce0da5(0x11b)]=MapCard[_0xce0da5(0xdc)],mapboxgl[_0xce0da5(0x14e)]('https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js',null,!![])),this[_0xce0da5(0xf7)]=_0x50dffa,this['description']=_0x1c3316,this[_0xce0da5(0x156)]=_0x214a5e,this[_0xce0da5(0x172)]=_0x28fcba,this[_0xce0da5(0x105)]=_0x28fcba[_0xce0da5(0xd3)],this[_0xce0da5(0x109)]=[],this[_0xce0da5(0x108)]=0x0,this[_0xce0da5(0x13d)]=0x0,this[_0xce0da5(0xeb)]=0x0,this[_0xce0da5(0x157)]='',this['steps_with_time']=[];}[_0x271d0d(0x166)](){const _0x4d713d=_0x271d0d;document['getElementById'](this[_0x4d713d(0x156)])[_0x4d713d(0x137)]('beforeend',_0x4d713d(0x13c)+this[_0x4d713d(0x172)][_0x4d713d(0xd3)]+'\x27\x20class=\x22w-100\x22\x20style=\x27\x20height:\x20300px;\x27\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22overmap\x22>\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x27'+this[_0x4d713d(0x172)][_0x4d713d(0xd3)]+'selector\x27\x20></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x27'+this[_0x4d713d(0x172)]['container']+_0x4d713d(0x113)+this['map']['container']+_0x4d713d(0x18b)+this[_0x4d713d(0x172)][_0x4d713d(0xd3)]+'loader\x27\x20></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x27'+this[_0x4d713d(0x172)][_0x4d713d(0xd3)]+_0x4d713d(0xc6)+this['map'][_0x4d713d(0xd3)]+'mapDescription\x22\x20class=\x22map-description\x22></div>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22card-body\x22>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h5\x20class=\x22card-title\x22>'+this[_0x4d713d(0xf7)]+'</h5>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22card-text\x22>'+this[_0x4d713d(0x178)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id\x20=\x20\x27'+this['map'][_0x4d713d(0xd3)]+'Load\x27></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>');}[_0x271d0d(0x19a)](){const _0x3690c6=_0x271d0d;document['getElementById'](this[_0x3690c6(0x105)]+_0x3690c6(0x15c))[_0x3690c6(0x16d)]=_0x3690c6(0x191)+this[_0x3690c6(0x105)]+'Select\x27\x20aria-label=\x22Slect\x20Layer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22dark-v11\x22\x20>Dark</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22light-v11\x22\x20>Light</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22streets-v12\x22\x20>Streets</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22outdoors-v12\x22\x20>Outdoors</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22satellite-streets-v12\x22\x20selected>Satellite</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</select>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';var _0x584c13=document[_0x3690c6(0x164)](this[_0x3690c6(0x105)]+_0x3690c6(0x17d));_0x584c13['onchange']=()=>{const _0x31f78e=_0x3690c6;this[_0x31f78e(0x172)]['setStyle'](_0x31f78e(0x17a)+_0x584c13[_0x31f78e(0x177)]);};}[_0x271d0d(0xd6)](){const _0x2b2a0b=_0x271d0d;this['map']=new mapboxgl[(_0x2b2a0b(0x10d))](this['map']);}['getMap'](){const _0xd10c81=_0x271d0d;return this[_0xd10c81(0x172)];}[_0x271d0d(0x199)](_0x4604f0){this['source_url']=_0x4604f0;}['setSourceUrlParam'](_0x2bc478){const _0x41f92c=_0x271d0d;this[_0x41f92c(0x157)]=_0x2bc478;}['fetchCentroids'](_0x50378b=!![],_0x158dad=0xa){const _0x1f3298=_0x271d0d;if(this[_0x1f3298(0x172)][_0x1f3298(0x180)]()>=_0x158dad){if(_0x50378b)var _0x20fa48=this['map'][_0x1f3298(0x12e)](),_0x5d5b42=_0x20fa48[_0x1f3298(0x151)](),_0x13e4d9=_0x20fa48[_0x1f3298(0x147)](),_0x30d555=this[_0x1f3298(0xfd)]+_0x1f3298(0x118)+_0x13e4d9['lat']+','+_0x13e4d9['lng']+','+_0x5d5b42[_0x1f3298(0x174)]+','+_0x5d5b42['lng'];else _0x30d555=this[_0x1f3298(0xfd)];fetch(_0x30d555)[_0x1f3298(0x168)](_0x4d5a72=>_0x4d5a72[_0x1f3298(0x17b)]())['then'](_0xedd2b9=>{const _0x1e5656=_0x1f3298;this[_0x1e5656(0x14d)][_0x1e5656(0x130)](_0x3b142e=>{const _0x43647c=_0x1e5656;_0x3b142e[_0x43647c(0x143)]();}),_0xedd2b9[_0x1e5656(0x19d)]['forEach'](_0x5c965e=>{const _0x294845=_0x1e5656;var _0x33682c=_0x5c965e['geometry'][_0x294845(0x10e)],_0xc5d1fe=new mapboxgl['Marker']({'color':_0x294845(0x104),'scale':0.2})['setLngLat'](_0x33682c)[_0x294845(0x115)](this['map']);this[_0x294845(0x14d)][_0x294845(0x135)](_0xc5d1fe);});})['catch'](_0x47112=>{const _0x205e0e=_0x1f3298;console[_0x205e0e(0x17c)](_0x205e0e(0x1a5),_0x47112);});}}[_0x271d0d(0xca)](_0x1ce080=!![],_0x38c665=0xa){const _0x35b818=_0x271d0d;this[_0x35b818(0x14d)]=[],this[_0x35b818(0x172)]['on'](_0x35b818(0x134),()=>{const _0x27c14c=_0x35b818;this[_0x27c14c(0xe0)](_0x1ce080=_0x1ce080,_0x38c665=_0x38c665);});}['setCache'](_0x894fc8){const _0x36071d=_0x271d0d;this[_0x36071d(0xeb)]!=this[_0x36071d(0x13d)]&&(document[_0x36071d(0x164)](this['map_container']+_0x36071d(0xc4))[_0x36071d(0x16d)]=_0x36071d(0xf2));if(_0x894fc8[0x0]>this[_0x36071d(0x108)]){var _0x59570a=![];fetch(_0x894fc8[0x1])['then'](_0x171591=>_0x171591[_0x36071d(0x17b)]())[_0x36071d(0x168)](_0x287937=>{const _0x37bdfd=_0x36071d;this[_0x37bdfd(0xeb)]++,_0x59570a=_0x287937,this[_0x37bdfd(0x109)]['push']([_0x894fc8[0x0],_0x59570a]),console[_0x37bdfd(0x126)](_0x37bdfd(0xd9)),this['cache'][_0x37bdfd(0x16e)]((_0xfbfb2e,_0xdee6f6)=>_0xfbfb2e[0x0]-_0xdee6f6[0x0]),this['cache_loaded']==this[_0x37bdfd(0x13d)]&&(document[_0x37bdfd(0x164)](this[_0x37bdfd(0x105)]+_0x37bdfd(0xc4))[_0x37bdfd(0x16d)]='');})['catch'](_0x225012=>{const _0x1e1d7b=_0x36071d;console[_0x1e1d7b(0x17c)]('Error\x20fetching\x20centroids\x20from\x20GeoServer:',_0x225012);}),this[_0x36071d(0x108)]=_0x894fc8[0x0],this[_0x36071d(0x13d)]++;}else console[_0x36071d(0x126)]('good\x20lad,\x20set\x20the\x20caches\x20from\x20lower\x20zoom\x20level\x20to\x20the\x20highest\x20');}[_0x271d0d(0x125)](_0x2885f9,_0x3ffa67){const _0x39446d=_0x271d0d;this[_0x39446d(0xc7)][_0x39446d(0x135)]([_0x2885f9,_0x3ffa67]);}[_0x271d0d(0x12d)](){const _0x3ecdca=_0x271d0d;this['steps_with_time'][_0x3ecdca(0x19f)]>0x0?(document[_0x3ecdca(0x164)](this[_0x3ecdca(0x105)]+'time')[_0x3ecdca(0x16d)]=_0x3ecdca(0x10a)+this[_0x3ecdca(0x105)]+_0x3ecdca(0xf3)+this[_0x3ecdca(0x105)]+_0x3ecdca(0xf1)+(this['steps_with_time'][_0x3ecdca(0x19f)]-0x1)+_0x3ecdca(0xff),document[_0x3ecdca(0x164)](this[_0x3ecdca(0x105)]+_0x3ecdca(0xfb))['addEventListener'](_0x3ecdca(0x11e),_0x1d2a7d=>{const _0x2c5352=_0x3ecdca;this[_0x2c5352(0x157)]=this[_0x2c5352(0xc7)][_0x1d2a7d['target'][_0x2c5352(0x177)]][0x1],document[_0x2c5352(0x164)](this[_0x2c5352(0x105)]+_0x2c5352(0x159))[_0x2c5352(0x16d)]=_0x2c5352(0xd8)+this[_0x2c5352(0xc7)][_0x1d2a7d[_0x2c5352(0x192)][_0x2c5352(0x177)]][0x0],this[_0x2c5352(0xe2)]();}),this[_0x3ecdca(0x157)]=this[_0x3ecdca(0xc7)][0x0][0x1],document[_0x3ecdca(0x164)](this['map_container']+'timelabel')['innerHTML']='Choose\x20Year:\x20'+this[_0x3ecdca(0xc7)][0x0][0x0],this[_0x3ecdca(0xe2)]()):console[_0x3ecdca(0x126)](_0x3ecdca(0x195));}[_0x271d0d(0xf8)](_0x334698=!![]){const _0x2ed851=_0x271d0d;var _0x389308=this['map'];this['map']['on']('load',function(){const _0x126c68=_0x3ded;_0x389308[_0x126c68(0x13b)]('clusters',{'type':_0x126c68(0xfa),'data':{'type':_0x126c68(0x13a),'properties':{'name':_0x126c68(0x16c),'description':'This\x20is\x20a\x20point'},'geometry':{'type':_0x126c68(0x1a4),'coordinates':[0x0,0x0]}}});var _0x3c3760=new ClusterLayers(_0x389308,'clusters');_0x3c3760[_0x126c68(0x116)](0x64,0x14,_0x126c68(0x18f)),_0x3c3760[_0x126c68(0x116)](0x2ee,0x1e,_0x126c68(0x15e)),_0x3c3760['setFinal'](0x28,_0x126c68(0x155)),_0x3c3760[_0x126c68(0x10c)](_0x126c68(0x185),0x5,0x1,_0x126c68(0x107)),_0x3c3760[_0x126c68(0x114)]();});if(_0x334698)this[_0x2ed851(0x172)]['on']('moveend',()=>{const _0x51bec8=_0x2ed851;this['cache'][_0x51bec8(0x19f)]>0x0?this[_0x51bec8(0x18a)]():this[_0x51bec8(0xe2)]();});else{this[_0x2ed851(0x172)][_0x2ed851(0x13b)](_0x2ed851(0x17f),{'type':_0x2ed851(0xfa),'data':{'type':_0x2ed851(0x13a),'properties':{'name':_0x2ed851(0x16c),'description':_0x2ed851(0x15a)},'geometry':{'type':'Point','coordinates':[0x0,0x0]}}});var _0xfac82f=new ClusterLayers(this['map'],'clusters');_0xfac82f[_0x2ed851(0x116)](0x64,0x14,_0x2ed851(0x18f)),_0xfac82f[_0x2ed851(0x116)](0x2ee,0x1e,_0x2ed851(0x15e)),_0xfac82f[_0x2ed851(0x133)](0x28,'#ffa657'),_0xfac82f[_0x2ed851(0x10c)](_0x2ed851(0x185),0x5,0x1,_0x2ed851(0x107)),_0xfac82f[_0x2ed851(0x114)]();}this[_0x2ed851(0xe2)]();}[_0x271d0d(0xe2)](){const _0x5906e4=_0x271d0d;fetch(this[_0x5906e4(0xfd)]+_0x5906e4(0x10b)+this[_0x5906e4(0x172)][_0x5906e4(0x180)]()+'&bbox='+this['map'][_0x5906e4(0x12e)]()[_0x5906e4(0x144)]()[_0x5906e4(0xfe)](',')+this[_0x5906e4(0x157)])[_0x5906e4(0x168)](_0x41e4ab=>_0x41e4ab[_0x5906e4(0x17b)]())[_0x5906e4(0x168)](_0x24d5cb=>{this['updateClusters'](_0x24d5cb);})[_0x5906e4(0x14a)](_0x1cb215=>{const _0x31ee78=_0x5906e4;console['error'](_0x31ee78(0x1a5),_0x1cb215);});}[_0x271d0d(0x18a)](){const _0x276758=_0x271d0d;if(this[_0x276758(0x172)][_0x276758(0x180)]()<this['cache_max_zoom']){console[_0x276758(0x126)](_0x276758(0x17e));for(let _0x58de80=0x0;_0x58de80<this[_0x276758(0x109)][_0x276758(0x19f)];_0x58de80++){if(this[_0x276758(0x109)][_0x58de80][0x0]>this['map']['getZoom']()){this[_0x276758(0xf4)](this[_0x276758(0x109)][_0x58de80][0x1]);break;}}}else this[_0x276758(0xe2)]();}['updateClusters'](_0x27aacf){const _0x8a5005=_0x271d0d;var _0x3b22b4={'type':_0x8a5005(0xf5),'features':_0x27aacf};JSON[_0x8a5005(0x13e)](_0x3b22b4),!this['map'][_0x8a5005(0xcb)](_0x8a5005(0x17f))&&this[_0x8a5005(0xf8)](![]),this[_0x8a5005(0x172)]['getSource'](_0x8a5005(0x17f))[_0x8a5005(0xfc)](_0x3b22b4),this[_0x8a5005(0x172)][_0x8a5005(0x138)](_0x8a5005(0x17f),_0x8a5005(0x163),_0x8a5005(0x139)),this[_0x8a5005(0x172)][_0x8a5005(0x138)](_0x8a5005(0x15d),_0x8a5005(0x163),'visible');}[_0x271d0d(0x198)](_0x1636d7=![]){const _0x618aae=_0x271d0d;this[_0x618aae(0x172)]['addSource']('clusters',{'type':_0x618aae(0xfa),'data':this['source_url'],'cluster':!![],'clusterMaxZoom':0xe,'clusterRadius':0x32});var _0x17fa5d=new ClusterLayers(map,_0x618aae(0x17f));_0x17fa5d['addStep'](0x64,0x14,_0x618aae(0x18f)),_0x17fa5d[_0x618aae(0x116)](0x2ee,0x1e,'#ffffff'),_0x17fa5d['setFinal'](0x28,'#ffa657'),_0x17fa5d[_0x618aae(0x10c)]('#e9bf48',0x5,0x1,_0x618aae(0x107)),_0x17fa5d[_0x618aae(0x114)](),_0x1636d7&&this[_0x618aae(0x172)]['on'](_0x618aae(0x16a),()=>{const _0x1e05ad=_0x618aae,_0x5f45f4=document[_0x1e05ad(0x164)](this[_0x1e05ad(0x105)]+_0x1e05ad(0xdd))[_0x1e05ad(0xd1)](_0x1e05ad(0x188));_0x5f45f4[_0x1e05ad(0x102)]=_0x1e05ad(0xef),_0x5f45f4[_0x1e05ad(0x161)]=_0x1e05ad(0x12c),_0x5f45f4[_0x1e05ad(0x100)]=!![];});}[_0x271d0d(0x18c)](){const _0x2fe317=_0x271d0d,_0x123bab=document[_0x2fe317(0x171)](_0x2fe317(0x188));_0x123bab[_0x2fe317(0x161)]=_0x2fe317(0x149),_0x123bab['addEventListener']('click',()=>{const _0x48635c=_0x2fe317;_0x123bab[_0x48635c(0x100)]=!![],_0x123bab[_0x48635c(0x161)]=_0x48635c(0x187),this[_0x48635c(0x198)](this[_0x48635c(0xfd)],!![]);}),_0x123bab[_0x2fe317(0x102)]='btn\x20w-100\x20btn-info\x20text-white\x20p-2',document[_0x2fe317(0x164)](this[_0x2fe317(0x105)]+_0x2fe317(0xdd))[_0x2fe317(0x196)](_0x123bab);}[_0x271d0d(0x19c)](_0x78ecd1){this['map']['setMaxZoom'](_0x78ecd1);}[_0x271d0d(0x11d)](_0x4d9341){const _0x171a41=_0x271d0d;this['map'][_0x171a41(0x11d)](_0x4d9341);}[_0x271d0d(0x121)](_0x525e76){this['map']['setMaxBounds'](_0x525e76);}[_0x271d0d(0x122)](){const _0x43e395=_0x271d0d;this[_0x43e395(0x172)][_0x43e395(0x1a1)](new mapboxgl['GeolocateControl']({'positionOptions':{'enableHighAccuracy':!![]},'trackUserLocation':!![]}));}[_0x271d0d(0x165)](){const _0x33c1a9=_0x271d0d;this[_0x33c1a9(0x172)][_0x33c1a9(0x1a1)](new mapboxgl[(_0x33c1a9(0x12b))]());}[_0x271d0d(0xcd)](){this['map']['addControl'](new mapboxgl['ScaleControl']());}[_0x271d0d(0xda)](){const _0x52ac01=_0x271d0d;this[_0x52ac01(0x172)][_0x52ac01(0x1a1)](new mapboxgl[(_0x52ac01(0x131))]());}[_0x271d0d(0x19e)](_0x3ad76f=!![],_0x459774=![],_0x5eeb80=![]){const _0x1408e2=_0x271d0d;this[_0x1408e2(0x13f)]=new MapboxDraw({'displayControlsDefault':![],'controls':{'polygon':_0x3ad76f,'point':_0x459774,'line_string':_0x5eeb80,'trash':!![]}}),this[_0x1408e2(0x172)][_0x1408e2(0x1a1)](this['draw']);}[_0x271d0d(0x162)](){const _0x3e7b6c=_0x271d0d;this[_0x3e7b6c(0x13f)]?this['map']['on']('draw.selectionchange',_0xec5e46=>{const _0x1c4a5d=_0x3e7b6c,_0x375c8c=_0xec5e46['features'][0x0];if(_0x375c8c&&_0x375c8c[_0x1c4a5d(0xdf)][_0x1c4a5d(0x152)]===_0x1c4a5d(0x117)){const _0x35dbb6=this[_0x1c4a5d(0x160)](_0x375c8c);console[_0x1c4a5d(0x126)](_0x1c4a5d(0xd0)+_0x35dbb6+_0x1c4a5d(0x14b)),document[_0x1c4a5d(0x164)](this[_0x1c4a5d(0x105)]+_0x1c4a5d(0x132))[_0x1c4a5d(0x16d)]=_0x1c4a5d(0x197)+formatNumber(_0x35dbb6)+'&#13217;\x20</div>';}}):console[_0x3e7b6c(0x126)](_0x3e7b6c(0x19b));}[_0x271d0d(0x11a)](){const _0x32f2c4=_0x271d0d;this[_0x32f2c4(0x13f)]?this[_0x32f2c4(0x172)]['on'](_0x32f2c4(0x142),_0x2c1f1d=>{const _0x48aca0=_0x32f2c4,_0x2d239d=_0x2c1f1d[_0x48aca0(0x19d)][0x0];if(_0x2d239d&&_0x2d239d['geometry']['type']===_0x48aca0(0x117)){const _0x45824e=_0x2d239d[_0x48aca0(0xdf)][_0x48aca0(0x10e)][0x0],_0x1f2224=_0x45824e['reduce']((_0x4d02d0,_0x14005d)=>{return _0x4d02d0['extend'](_0x14005d);},new mapboxgl[(_0x48aca0(0x103))](_0x45824e[0x0],_0x45824e[0x0])),_0x1a05b0=_0x1f2224[_0x48aca0(0x147)](),_0x56b776=_0x1f2224[_0x48aca0(0x151)](),_0x13783a=_0x1f2224[_0x48aca0(0xf6)](),_0x39f74c={'width':window[_0x48aca0(0x111)],'height':window[_0x48aca0(0x176)]},_0x1b323b=this[_0x48aca0(0x15f)](_0x1f2224,_0x39f74c),_0x432c54=_0x48aca0(0x120)+_0x13783a[_0x48aca0(0x150)]+','+_0x13783a[_0x48aca0(0x174)]+','+_0x1b323b+_0x48aca0(0x129)+mapboxgl[_0x48aca0(0x11b)];document[_0x48aca0(0x164)](this['map_container']+_0x48aca0(0xea))[_0x48aca0(0x16d)]='<div\x20class=\x20\x22text-left\x20w-100\x20my-2\x20\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22'+_0x432c54+'\x22\x20target=\x27_blank\x27\x20class=\x22text-decoration-none\x20btn\x20btn-light\x20h6\x22\x20download>Download\x20Satellite\x20Image</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>';}}):console[_0x32f2c4(0x126)](_0x32f2c4(0x19b));}[_0x271d0d(0x15f)](_0x1acd0e,_0x187285){const _0x106cd4=_0x271d0d,_0x2cf0af={'height':0x100,'width':0x100},_0x26f238=0x16;function _0x2e6728(_0x2159b1){const _0x39322a=_0x3ded,_0x164079=Math[_0x39322a(0xcf)](_0x2159b1*Math['PI']/0xb4),_0xff4e49=Math['log']((0x1+_0x164079)/(0x1-_0x164079))/0x2;return Math[_0x39322a(0x193)](Math[_0x39322a(0x14c)](_0xff4e49,Math['PI']),-Math['PI'])/0x2;}function _0x165bf9(_0x4ef29b,_0x45f94e,_0x56aff6){const _0x2cbf46=_0x3ded;return Math[_0x2cbf46(0x1a3)](Math[_0x2cbf46(0x126)](_0x4ef29b/_0x45f94e/_0x56aff6)/Math[_0x2cbf46(0xd7)]);}const _0x1fa972=(_0x2e6728(_0x1acd0e[_0x106cd4(0x11f)]())-_0x2e6728(_0x1acd0e['getSouth']()))/Math['PI'],_0xf43d02=_0x1acd0e['getEast']()-_0x1acd0e['getWest'](),_0x24ec66=(_0xf43d02<0x0?_0xf43d02+0x168:_0xf43d02)/0x168,_0x42bad0=_0x165bf9(_0x187285[_0x106cd4(0x12f)],_0x2cf0af['height'],_0x1fa972),_0x30522b=_0x165bf9(_0x187285[_0x106cd4(0xe3)],_0x2cf0af['width'],_0x24ec66);return Math[_0x106cd4(0x14c)](_0x42bad0,_0x30522b,_0x26f238);}[_0x271d0d(0x160)](_0x15aa09){const _0x18a970=_0x271d0d;if(_0x15aa09['geometry']['type']===_0x18a970(0x117))return turf['area'](_0x15aa09);return 0x0;}['AddDescription'](_0xb785d){const _0x25cedc=_0x271d0d;document[_0x25cedc(0x164)](this[_0x25cedc(0x105)]+_0x25cedc(0x145))[_0x25cedc(0x16d)]=_0x25cedc(0xee)+_0xb785d+_0x25cedc(0x153);}}MapCard[_0x271d0d(0x10f)]('pk.eyJ1IjoibWhkMTIzbXN3aSIsImEiOiJjamp0azg5OHAyaGIxM3Fvbjc0b3pvZ2VpIn0.vmB_VWu_ewHeNBtoEtdt7Q'),card=new MapCard(_0x271d0d(0xf9),_0x271d0d(0xd2),_0x271d0d(0x183),{'container':_0x271d0d(0x128),'style':'mapbox://styles/mapbox/satellite-streets-v12','center':[0x24,0x22],'zoom':6.5}),card[_0x271d0d(0x166)](),card[_0x271d0d(0xd6)](),card[_0x271d0d(0xda)](),card[_0x271d0d(0x165)](),card[_0x271d0d(0xcd)](),card[_0x271d0d(0x19a)](),card['addGeoLocator'](),card['setCache']([0x8,_0x271d0d(0x101)]),card[_0x271d0d(0xcc)]([0x9,'https://geoai.cnrs.edu.lb/geoaigeoserver/static/deja_clustered/lebanon_7.json']),card['setCache']([0xa,_0x271d0d(0x173)]),card[_0x271d0d(0xcc)]([0xb,_0x271d0d(0x186)]),card[_0x271d0d(0xcc)]([0xc,_0x271d0d(0x181)]),card['setCache']([0xd,_0x271d0d(0x146)]),card['setCache']([0xf,'https://geoai.cnrs.edu.lb/geoaigeoserver/static/deja_clustered/lebanon_12.json']),card['setSourceUrl']('https://geoai.cnrs.edu.lb/geoaigeoserver'),card[_0x271d0d(0xf8)](),wheat_card=new MapCard(_0x271d0d(0x124),_0x271d0d(0xde),'main_cards_body',{'container':_0x271d0d(0x18d),'style':_0x271d0d(0x14f),'center':[0x24,0x22],'zoom':6.5}),wheat_card[_0x271d0d(0x166)](),wheat_card[_0x271d0d(0xd6)](),wheat_card['addFullScreen'](),wheat_card[_0x271d0d(0x165)](),wheat_card[_0x271d0d(0xcd)](),wheat_card['addStyleSelector'](),wheat_card[_0x271d0d(0x122)](),wheat_card[_0x271d0d(0x199)](_0x271d0d(0x140)),wheat_card['serverCluster'](),wheat_card[_0x271d0d(0x125)](_0x271d0d(0xe5),_0x271d0d(0xe1)),wheat_card['addTimeStep'](_0x271d0d(0x16b),_0x271d0d(0x127)),wheat_card[_0x271d0d(0x125)](_0x271d0d(0xc5),'&year=2018'),wheat_card['addTimeStep'](_0x271d0d(0x112),_0x271d0d(0xd4)),wheat_card[_0x271d0d(0x125)]('2020',_0x271d0d(0x141)),wheat_card[_0x271d0d(0x125)](_0x271d0d(0x179),_0x271d0d(0x1a2)),wheat_card[_0x271d0d(0x125)]('2022',_0x271d0d(0xce)),wheat_card[_0x271d0d(0x125)](_0x271d0d(0xe8),_0x271d0d(0x158)),wheat_card[_0x271d0d(0x12d)](),wheat_card[_0x271d0d(0x170)](_0x271d0d(0x167));

</script>